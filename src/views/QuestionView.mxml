<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:mx="library://ns.adobe.com/flex/mx" 
		title="Lesson #{data.lessonName}"
		contentCreationComplete="contentCreationCompleted(event)"
		>
	<s:layout>
		<s:VerticalLayout paddingTop="15" paddingBottom="15" paddingLeft="15" paddingRight="15" horizontalAlign="center" />
	</s:layout>
	
	<fx:Style>
		.myHeadingStyle { 
			fontSize: 24;
			fontWeight: bold;
		}
		
		.questionContentStyle { 
			fontSize: 20;
		}
	</fx:Style>
	
	<fx:Script>
		<![CDATA[
			import mx.events.FlexEvent;
			
			[Bindable]
			public var currentQuestion:Number;
			
			[Bindable]
			public var questionContentStr:String;
			
			
			protected function contentCreationCompleted(event:FlexEvent):void
			{
				currentQuestion = 0;
				trace("lessonName: " + data.lessonName);
				updateQuestionInfo();
				if (currentQuestion == 0) {
					previousButton.enabled = false;
				}
			}
			
			protected function nextButton_clickHandler(event:MouseEvent):void
			{
				currentQuestion++;
				previousButton.enabled = true;
				if (currentQuestion + 1 >= data.questions.length()) {
					nextButton.enabled = false;
				}
				updateQuestionInfo();
			}
			
			protected function previousButton_clickHandler(event:MouseEvent):void
			{
				currentQuestion--;
				nextButton.enabled = true;
				if (currentQuestion == 0) {
					previousButton.enabled = false;
				}
				updateQuestionInfo();
			}
			
			protected function lessonsButton_clickHandler(event:MouseEvent):void
			{
				navigator.popView();
			}
			
			protected function updateQuestionInfo():void 
			{
				var question:XML = data.questions[currentQuestion];
				questionContentStr = question.questionContent;
			}
			
		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>

	<s:VGroup height="100%" minHeight="400" minWidth="500" horizontalAlign="center">
		<s:Spacer height="15" />
		<s:Group width="100%" >
			<!-- <s:Rect x="0" y="0" 
					radiusX="4" radiusY="4" 
					height="100%" width="100%">
				<s:stroke>
					<s:LinearGradientStroke weight="1" scaleMode="normal"/>
				</s:stroke>
				<s:fill>
					<s:LinearGradient>
						<s:entries>
							<mx:GradientEntry color="0x999999"/>
						</s:entries>
					</s:LinearGradient>
				</s:fill>
				
			</s:Rect> -->
			<s:Label id="questionNumber" text="Question #{currentQuestion+1}" paddingTop="10" horizontalCenter="0" styleName="myHeadingStyle"  />	
		</s:Group>
		
		<mx:Spacer height="15%"/>
		<s:HGroup width="90%">
			<s:Label id="questionContent" text="{questionContentStr}" width="50%" styleName="questionContentStyle" />
			<s:Image id="questionImage" source="" width="50%" />
		</s:HGroup>

		<mx:Spacer height="15%"/>
		<s:TextArea id="answer" />
	</s:VGroup>
	<s:VGroup verticalAlign="bottom" paddingBottom="40" width="500">
		<s:HGroup paddingBottom="15" width="100%" verticalAlign="bottom">
			<s:Button label="&lt; Previous" id="previousButton" click="previousButton_clickHandler(event)" />
			<mx:Spacer width="100%"/>
			<s:Button label="Next >" id="nextButton" click="nextButton_clickHandler(event)" />	
		</s:HGroup>
		<s:Button label="&lt; Back to Lessons" id="backToLessonsButton" click="lessonsButton_clickHandler(event)" />
	</s:VGroup>

</s:View>
